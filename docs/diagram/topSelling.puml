@startuml

actor 사용자
participant "OrderHistoryController"
participant "OrderHistoryService"
participant "OrderHistoryRepository"

== TOP 5 상품 목록 조회 ==
사용자 -> OrderHistoryController : GET /history/top-selling
OrderHistoryController -> OrderHistoryService : 상위 판매 상품 조회 요청

== 3일간 주문 이력 조회 ==
OrderHistoryService -> OrderHistoryRepository : 3일간의 주문 이력 조회
OrderHistoryRepository -> OrderHistoryService : 3일간의 상위 상품 정보 반환 (ID, 이름, 가격, 재고)

== 상위 5개 상품 미만일 경우 추가 조회 ==
alt 5개 미만인 경우
    OrderHistoryService -> OrderHistoryRepository : 7일간의 추가 주문 이력 조회
    OrderHistoryRepository -> OrderHistoryService : 7일간의 상위 상품 정보 반환 (ID, 이름, 가격, 재고)
    OrderHistoryService -> OrderHistoryController : 상위 상품 목록 채워서 반환
else 5개 이상일 경우
    OrderHistoryService -> OrderHistoryController : 상위 5개 상품 정보 반환
end

OrderHistoryController -> 사용자 : 상위 5개 상품 정보 응답

@enduml
