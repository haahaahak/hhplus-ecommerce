@startuml

actor 사용자
participant "ProductHistoryController"
participant "ProductHistoryService"
participant "ProductHistoryRepository"

== TOP 5 상품 목록 조회 ==
사용자 -> ProductHistoryController : GET /history/top-selling
ProductHistoryController -> ProductHistoryService : 상위 판매 상품 조회 요청

== 3일간 주문 이력 조회 ==
ProductHistoryService -> ProductHistoryRepository : 3일간의 주문 이력 조회
ProductHistoryRepository -> ProductHistoryService : 3일간의 상위 상품 정보 반환 (ID, 이름, 가격, 재고)

== 상위 5개 상품 미만일 경우 추가 조회 ==
alt 5개 미만인 경우
    ProductHistoryService -> ProductHistoryRepository : 7일간의 추가 주문 이력 조회
    ProductHistoryRepository -> ProductHistoryService : 7일간의 상위 상품 정보 반환 (ID, 이름, 가격, 재고)
    ProductHistoryService -> ProductHistoryController : 상위 상품 목록 채워서 반환
else 5개 이상일 경우
    ProductHistoryService -> ProductHistoryController : 상위 5개 상품 정보 반환
end

ProductHistoryController -> 사용자 : 상위 5개 상품 정보 응답

@enduml
