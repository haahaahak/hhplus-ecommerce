@startuml

start

:사용자 상위 상품 조회 요청;
:현재 날짜로부터 3일간의 주문 이력 조회;

if (3일간 주문 이력 존재?) then (Yes)
    :주문 이력에서 상품별 판매 수량 합산;
    :판매량 기준 상위 상품 선택;

    if (상위 상품 5개 미만?) then (Yes)
        :현재 날짜로부터 7일간의 주문 이력 조회;
        :7일 기준 추가 상위 상품 선택;
        :상위 상품 목록 채우기;
    endif

    :상위 5개 상품 정보 반환 (ID, 이름, 가격, 재고);
else (No)
    :현재 날짜로부터 7일간의 주문 이력 조회;
    :판매량 기준 상위 상품 선택;
    :상위 5개 상품 정보 반환 (ID, 이름, 가격, 재고);
endif

stop

@enduml
